<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>giddy.rank.SpatialTau &#8212; giddy v2.3.3 Manual</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/pysal-styles.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"equationNumbers": {"autoNumber": "AMS", "useLabelIds": true}}, "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../_static/pysal_favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="giddy.rank.Tau_Local" href="giddy.rank.Tau_Local.html" />
    <link rel="prev" title="giddy.rank.Tau" href="giddy.rank.Tau.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          giddy</a>
        <span class="navbar-text navbar-version pull-left"><b>2.3.3</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../installation.html">Installation</a></li>
                <li><a href="../tutorial.html">Tutorial</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../references.html">References</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installing-released-version">Installing released version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installing-development-version">Installing development version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../MarkovBasedMethods.html">Spatially Explicit Markov Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../RankMarkov.html">Full Rank Markov and Geographic Rank Markov</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MobilityMeasures.html">Measures of Income Mobility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DirectionalLISA.html">Directional Analysis of Dynamic LISAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../RankBasedMethods.html">Rank based Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Sequence.html">Alignment-based sequence methods</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api.html#markov-methods">Markov Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#directional-lisa">Directional LISA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#economic-mobility-indices">Economic Mobility Indices</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#exchange-mobility-methods">Exchange Mobility Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#alignment-based-sequence-methods">Alignment-based Sequence Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#utility-functions">Utility Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">giddy.rank.SpatialTau</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="giddy-rank-spatialtau">
<h1>giddy.rank.SpatialTau<a class="headerlink" href="#giddy-rank-spatialtau" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="giddy.rank.SpatialTau">
<em class="property">class </em><code class="sig-prename descclassname">giddy.rank.</code><code class="sig-name descname">SpatialTau</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">permutations</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/giddy/rank.html#SpatialTau"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#giddy.rank.SpatialTau" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatial version of Kendall’s rank correlation statistic.</p>
<p>Kendall’s Tau is based on a comparison of the number of pairs of n
observations that have concordant ranks between two variables. The spatial
Tau decomposes these pairs into those that are spatial neighbors and those
that are not, and examines whether the rank correlation is different
between the two sets relative to what would be expected under spatial randomness.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">array</span></dt><dd><p>(n, ), first variable.</p>
</dd>
<dt><strong>y</strong><span class="classifier">array</span></dt><dd><p>(n, ), second variable.</p>
</dd>
<dt><strong>w</strong><span class="classifier">W</span></dt><dd><p>spatial weights object.</p>
</dd>
<dt><strong>permutations</strong><span class="classifier">int</span></dt><dd><p>number of random spatial permutations for computationally
based inference.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Algorithm has two stages. The first calculates classic Tau using a list
based implementation of the algorithm from <span id="id1">[<a class="reference internal" href="../references.html#id13"><span>Chr05</span></a>]</span>. Second
stage calculates concordance measures for neighboring pairs of locations
using a modification of the algorithm from <span id="id2">[<a class="reference internal" href="../references.html#id12"><span>PTVF07</span></a>]</span>. See
<span id="id3">[<a class="reference internal" href="../references.html#id11"><span>Rey14a</span></a>]</span> for details.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">libpysal</span> <span class="k">as</span> <span class="nn">ps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">giddy.rank</span> <span class="kn">import</span> <span class="n">SpatialTau</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;mexico.csv&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pcgdp</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">dec</span> <span class="k">for</span> <span class="n">dec</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1940</span><span class="p">,</span><span class="mi">2010</span><span class="p">,</span><span class="mi">10</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">by_col</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vnames</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">regime</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">by_col</span><span class="p">[</span><span class="s1">&#39;esquivel99&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">block_weights</span><span class="p">(</span><span class="n">regime</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">=</span><span class="p">[</span><span class="n">SpatialTau</span><span class="p">(</span><span class="n">y</span><span class="p">[:,</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[:,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">w</span><span class="p">,</span><span class="mi">99</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">ev</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">taus</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gp">... </span>    <span class="s2">&quot;</span><span class="si">%8.3f</span><span class="s2"> </span><span class="si">%8.3f</span><span class="s2"> </span><span class="si">%8.3f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">tau_spatial</span><span class="p">,</span> <span class="n">ev</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">tau_spatial_psim</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&#39;   0.397    0.659    0.010&#39;</span>
<span class="go">&#39;   0.492    0.706    0.010&#39;</span>
<span class="go">&#39;   0.651    0.772    0.020&#39;</span>
<span class="go">&#39;   0.714    0.752    0.210&#39;</span>
<span class="go">&#39;   0.683    0.705    0.270&#39;</span>
<span class="go">&#39;   0.810    0.819    0.280&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tau</strong><span class="classifier">float</span></dt><dd><p>The classic Tau statistic.</p>
</dd>
<dt><strong>tau_spatial</strong><span class="classifier">float</span></dt><dd><p>Value of Tau for pairs that are spatial neighbors.</p>
</dd>
<dt><strong>taus</strong><span class="classifier">array</span></dt><dd><p>(permtuations, 1), values of simulated tau_spatial values
under random spatial permutations in both periods. (Same
permutation used for start and ending period).</p>
</dd>
<dt><strong>pairs_spatial</strong><span class="classifier">int</span></dt><dd><p>Number of spatial pairs.</p>
</dd>
<dt><strong>concordant</strong><span class="classifier">float</span></dt><dd><p>Number of concordant pairs.</p>
</dd>
<dt><strong>concordant_spatial</strong><span class="classifier">float</span></dt><dd><p>Number of concordant pairs that are spatial neighbors.</p>
</dd>
<dt><strong>extraX</strong><span class="classifier">float</span></dt><dd><p>Number of extra X pairs.</p>
</dd>
<dt><strong>extraY</strong><span class="classifier">float</span></dt><dd><p>Number of extra Y pairs.</p>
</dd>
<dt><strong>discordant</strong><span class="classifier">float</span></dt><dd><p>Number of discordant pairs.</p>
</dd>
<dt><strong>discordant_spatial</strong><span class="classifier">float</span></dt><dd><p>Number of discordant pairs that are spatial neighbors.</p>
</dd>
<dt><strong>taus</strong><span class="classifier">float</span></dt><dd><p>spatial tau values for permuted samples (if permutations&gt;0).</p>
</dd>
<dt><strong>tau_spatial_psim</strong><span class="classifier">float</span></dt><dd><p>one-sided pseudo p-value for observed tau_spatial under the null
of spatial randomness of rank exchanges (if permutations&gt;0).</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="giddy.rank.SpatialTau.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">w</span></em>, <em class="sig-param"><span class="n">permutations</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/giddy/rank.html#SpatialTau.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#giddy.rank.SpatialTau.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#giddy.rank.SpatialTau.__init__" title="giddy.rank.SpatialTau.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(x, y, w[, permutations])</p></td>
<td><p>Initialize self.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/generated/giddy.rank.SpatialTau.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2018-, pysal developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>